{
    "collab_server" : "",
    "contents" : "# Introduction {#intro}\n\n## Pourquoi R ?\n\n\n### La popularité de R  et sa facilité  \n\nUn nombre croissant de personnes utilisent R. Les graphiques montrent le nombre croissant de questions en relation au langage R sur le site [stack overflow](http://stackoverflow.com/). Ces graphiques sont obtenus en utilisant un script *R* (voir code en bas de la page), qui va automatiquement chercher la donnée sur internet, la traiter et visualiser les résultats du nombre de questions à propos de R sur le site.  \n```{r, echo=FALSE,message=FALSE, warning=FALSE}\nrm(list=ls())\n# réquétes \n# https://data.stackexchange.com/stackoverflow/query/338993/r-trends-questions-per-tag-per-month#resultSets\n\n\n# Importer les données \nurl <- \"https://data.stackexchange.com/stackoverflow/csv/440417\"\n# dat <- read.csv(url)\nload(file = \"data_questions.Rdata\")\n\ndat$Month <- as.Date(dat$Month)\n\n# Dessiner les graphes sous formes de fonctions \n\nlibrary(dplyr)\nlibrary(ggplot2)\n# data mining \n# sommer les question et les ordonner \ntotalQuestions <- function(x) {\n  z <- x %>% group_by(TagName) %>% summarise(total = sum(Questions)) %>% arrange(desc(total))\n  new <- as.character(z$TagName)\n  z$TagName <- factor(new, levels = new)\n  z\n}\n\n# fonctions graphiques  \n# \ntagPlot <- function(x, title = \"Tag popularity\") {\n  ggplot(x, aes(x = TagName, y = total)) + \n    geom_bar(stat = \"identity\") +\n    ggtitle(title) + \n    xlab(NULL) + ylab(NULL)\n}\n\n# les question depuis 2016-01-01\ndat %>% filter(Month >= \"2016-01-01\") %>% totalQuestions() %>% tagPlot()\n\n\n\n#  ------------------------------------------------------------------------\n\n\n# Ordonner les Tags \nz <- dat %>% filter(Month >= \"2016-01-01\") %>% totalQuestions()\ndat$TagName <- factor(as.character(dat$TagName), levels = as.character(z$TagName))\n\nlibrary(ggplot2)\n\n\n# Tendances depuis le premier janvier 2014 \n#################\n\n\ntoto=lapply(X =setNames(as.character( unique(dat$TagName)),as.character( unique(dat$TagName))),FUN = function(x) lm(data = dat[dat$TagName==x,] %>% filter(Month >= \"2014-01-01\"),formula =  Questions~Month)$coefficients)\nmat=do.call(rbind,toto)\ntendances = mat[order(mat[,2,drop=T]),2,drop=F]\ncolnames(tendances) = \"Tendances depuis 2014\"\n ggplot(dat, aes(x = Month, y = Questions, group = TagName, colour = TagName)) + \n  theme_bw(20) + geom_line(size = 1)\nlibrary(ggthemes)\n ggplot(dat, aes(x = Month, y = Questions, group = TagName, colour = TagName)) + \n  theme_bw(20)+ geom_smooth(size = 1, method = \"lm\", span = 0.5)\n# \n# p1 <- ggplot(dat, aes(x = Month, y = Questions, group = TagName, colour = TagName)) + \n#   theme_bw(20)\n\n# \n#https://www.r-bloggers.com/the-most-popular-programming-languages-on-stackoverflow/\n\n# knitr::kable(tendances)\n\n```\n\n### D'autres raisons \n\n\n* Open source & Gratuit\n* Une très grosse communauté de développeurs et d'utilisateurs\n* Facile à utiliser pour des non-programmeurs pour des calculs statistiques\n* Possibilité de créer de belles illustrations, applications web et même le cours que vous lisez actuellement (à l'aide du package Bookdown)\n* Facile à installer sur les systèmes d'exploitations Linux, Windows et Apple\n* Une quantité très importante de package \n\n\n## Environnement R \n\n### Pré requis Installation de R \n\nSur Windows\n\n* aller à l'url http://cran.r-project.org/bin/windows/base/ et télécharger la dernière version de R en fonction de votre ordinateur 32 bit ou 64 bit (pour le savoir aller sur paramètres>système>information système)\n\nSur Apple\n\n* http://cran.r-project.org/bin/macosx/ et télécharger la dernière version de R\n\nPour installer Rstudio\n\n* http://www.rstudio.com/ide/ pour télécharger la dernière version et installer l'environnement de travail R studio en suivant les indications du site\n\n### Présentation  de Rstusio \n\nRstudio est un IDE, un environnement de travail pour le langage R. Une interface graphique permet plus facilement d’interagir avec le langage à l'aide de multiple fonctionnalité. Pour les connaître, la lecture de l'aide mémoire de Rstdudio est très utile https://www.rstudio.org/links/ide_cheat_sheet. \n\n![Editeur](/home/mrrobot/Documents/FIN406_2017/Picture/IDE_1.png)\n\nUne courte présentation du logiciel Rstudio est faite ci-dessous :\n\nLors de l'ouverture de Rstudio, quatre fenêtres s'ouvrent par défaut. La fenêtre en haut à gauche est un éditeur de texte, qui permet d’écrire un script en R (succession de ligne de commande composée de fonction permettant de créer un véritable programme informatique). En bas à gauche la console R  est semblable a un terminal de calculatrice ou d'un ordinateur (Dos, UNIX). Nous pouvons l'utiliser pour lancer diverses commandes, fonctions et scripts R. Généralement, lors de l’exécution d'une commande par exemple `print(\"hello\")`, `ls()`, `version` et même d'un script les résultats sont afficher à cet endroit. \n\n![Console](/home/mrrobot/Documents/FIN406_2017/Picture/IDE_2.png)\n\n\nLa fenêtre en bas à droite est composée de plusieurs tableaux : \n\n * les fichiers ou dossiers présents dans le répertoire courant (dossier où nous sommes) **Files**\n * un tableau où les graphiques sont générés **Plots**\n * une liste des paquets déjà installés (charger ou non) **Package**\n * l'aide (très importante) des fonctions qui peuvent-être affichées à l'aide de `?` si on connait la fonction et `??` pour effectuer une recherche. **Help**\n * une fenêtre de visualisation des sorties du programme R en html **Viewer**\n \n \n   ![Environnement de R](/home/mrrobot/Documents/FIN406_2017/Picture/IDE4.png)\n\n \nLa fenêtre en haut à droite sont composées de deux tableaux : \n\n* La fenêtre d'environnement (objets, fonction chargée)\n* L'historique \n\n\n### Vous êtes ici !\n\nLa première étape lors du commencement d'un projet à l'aide du logiciel R est de se repérer et de pouvoir changer notre dossier courant de travail.\n\n```{r, message=FALSE, warning=FALSE, eval=FALSE}\n?getwd()\ngetwd() # fonction pour savoir où l'on est \nsetwd(\"~/Documents/\") # fonction pour changer de répertoire\nfile.choose() # permet d'ouvrir un fichier \n\n```\n\nLister les objets et les supprimer sont des étapes nécessaires avant de lancer un script. L’omission ou le surplus d'un fichier dans la console R peut-être une source d'erreur.\n\n```{r}\nls() \na = 1 # création d'un objet R  de type integer \nb <- 2 # création d'un second objet \nls() # on peut voir apparaître les nouveaux objets que nous avons créé \nrm(list=ls())\nls() \n```\n\n### Variables\nDans ce paragraphe nous ferons des rappels sur les variables et les fonctions.\n\n\nDans R la fonction `class()` permet de reconnaître le type de variable. Pour créer une variable ou un objet `<-` est à préférer plutôt que le signe `=`\n```{r console, echo=TRUE, message=TRUE,eval=TRUE}\na = \"Hello\"\na<-\"Hello\"\n\nclass(a)\n\nb <- 1 \nclass(b)\n\n#vecteurs\nc <- c(1,2,3,4)\nd <- c(\"a\",\"b\",\"c\",\"d\")\ne <- c(\"a\"=1,\"b\"=2,\"c\"=3,\"d\"=4)\nf <- c(1,\"a\",\"d\",4)\n```\n\n\n```{r variables, echo=TRUE, message=TRUE,eval=TRUE}\nclass(c)\nclass(d)\nclass(e)\nclass(f)\n```\n Attention le vecteur `f` ne peut pas mélanger les types de variables. R traduit en string les éléments du vecteurs de type numérique. \n\nLes matrices permettent de stocker des numériques ou des caractères en 2 dimensions. Mais pas les deux en même temps cette action est impossible. Il faudra utiliser une dataframe  pour cela. \n\n```{r matrix, echo=TRUE, message=TRUE}\n  f.m <- cbind(f)\nf.m\n  c.m <- cbind(c)\n  c.m\n  \n \n```\n\n```{r matrix1, echo=TRUE, message=TRUE}\n  m.m <- cbind(f.m,c.m)\n    m.m\n        n.m <- cbind(c.m,c.m)\n        n.m\n\n```\nCi dessus nous avons avons vu la limitation des matrices. La matisse est soit de type numérique ou caractère. Pour résoudre ce problème, nous allons initialiser un nouveau objet une dataframe, qui très semblable à une matrice.\n\n```{r dataframe, echo=TRUE, message=TRUE}\nmat <- matrix(data = c.m, ncol=4,nrow = 3)\nmat\ndf = data.frame(\"numeriques\"= c, lettres=f,stringsAsFactors = F)\ndf$numeriques\ndf$lettres\ndf[,2]\n```\n\n\n```{r dataframe1, echo=TRUE, message=TRUE}\nclass(mat[,1])\nclass(df[,\"numeriques\"])\nclass(df[,\"lettres\"])\n```\n\n```{r as, echo=TRUE, message=TRUE}\nas.matrix(df)\n\nas.numeric(f)\n\nas.data.frame(df)\n\n```\n\nUne liste permet de stocker n'importe quel type d'objet même des graphiques. \n\n```{r}\n### \nlibrary(ggplot2)\n\nliste_objet = list(dataframe= df , a= a, vec = d, mat = mat,plot= qplot(rnorm(1:100)))\nliste_objet\n```\n\n#### Dates \n\n Les dates et les heures sont gérer par R : \n * les dates avec `as.Date()`\n * les dates avec heures à l'aide de `as.POSIXct()`\n \n \n```{r}\nSys.time()\nclass(Sys.time())\n\nSys.Date()\nclass(Sys.Date())\n\n\n```\n\n### Relation logique  \n```{r logique, echo=TRUE, message=TRUE}\n1==0\n1>=0\n1<=0\n\"a\" == \"b\"\ne <- c(\"a\"=1,\"b\"=2,\"c\"=3,\"d\"=4)\n2 %in% e\ne %in% 2\nc(1,3) %in% e\n```\n\nLes commandes matrix(), cbind(), data.frame() sont des fonctions codées. \n\n**Définition d'une fonction**\n\n* est un objet R\n* composée de commandes R écrites dans un fichier qui effectuent une tâche prédéfinie\n* permet de faire automatiquement la même tâche plusieurs fois \n* garder un programme plus lisible \n* un gain de temps à long terme \n\n**Exercice**  Votre première fonction : \n\n * Ecrire un code qui prend en argument un texte et le renvoie (fonction équivalente à print) en console sous forme de fonction dans un nouveau fichier hello_fun.R\n\n```{r fonction2, echo=TRUE, message=TRUE}\nhello <-function(texte=NULL){   # argument ou données d'entrées\n\n  #code manipulant les données\n \nreturn(texte)  #  return  renvoie le résultat de la fonction  \n}\n# source(\"C:/Users/Laurent/Documents/cours_data_visualisation/hello_fun.R\")\n\n hello(\"hello world !\")\n```\n\n\nUn petit ajout le nom de l'utilisateur :\n \n```{r fonction1, echo=TRUE, message=TRUE}\nhello <-function(texte=NULL){  \n  #on souhaite coller le nom de l'utilisateur à \"hello world\"\n #nom <- Sys.getenv(\"USERNAME\") \n  nom <- Sys.getenv(\"USER\") # si on est sur linux \n\n   # on colle le nom de l'utilisateur\n texte <- paste(nom,texte)\n \nreturn(texte)  #  return  renvoie le r?sultat de la fonction  \n}\n\n# source(\"C:/Users/Laurent/Documents/cours_data_visualisation/hello_fun2.R\")\n\n hello(\"hello world !\")\n```\n\n### Les Packages R \n\n\n\nLes paquets sont constitués de fonctions, données et de code compilé dans un format bien précis. Le répertoire, où le paquet est stocké, est appelé librairie. Le logiciel R vient avec un nombre standard de paquet. D'autres sont disponibles pour le téléchargement. Une fois installé, ils doivent être installé dans la session pour être utilisé. \n\n La fonction `install.packages(\"devtools\")` permet d’installer et de télécharger le pacquer deltoïdes. \n\n```{r,eval=F}\ninstall.packages(\"devtools\") ### Pour plus facilement installer les packets \ninstall.packages(\"ggplot2\") ### pour faire de la data visualisation \n# install.packages(\"ggmap\")\n# \n# install.packages(\"leaflet\")\n\n\n\n\n```\n\n\n### Exemple de Script\n\n```{r,eval=F}\n\n# réquétes \n# https://data.stackexchange.com/stackoverflow/query/338993/r-trends-questions-per-tag-per-month#resultSets\n\n\n# Importer les données \nurl <- \"https://data.stackexchange.com/stackoverflow/csv/440417\"\n# dat <- read.csv(url)\nload(file = \"data_questions.Rdata\")\n\ndat$Month <- as.Date(dat$Month)\n\n# Dessiner les graphes sous formes de fonctions \n\nlibrary(dplyr)\nlibrary(ggplot2)\n# data mining \n# sommer les question et les ordonner \ntotalQuestions <- function(x) {\n  z <- x %>% group_by(TagName) %>% summarise(total = sum(Questions)) %>% arrange(desc(total))\n  new <- as.character(z$TagName)\n  z$TagName <- factor(new, levels = new)\n  z\n}\n\n# fonctions graphiques  \n# \ntagPlot <- function(x, title = \"Tag popularity\") {\n  ggplot(x, aes(x = TagName, y = total)) + \n    geom_bar(stat = \"identity\") +\n    ggtitle(title) + \n    xlab(NULL) + ylab(NULL)\n}\n\n# les question depuis 2016-01-01\ndat %>% filter(Month >= \"2016-01-01\") %>% totalQuestions() %>% tagPlot()\n\n\n\n#  ------------------------------------------------------------------------\n\n\n# Ordonner les Tags \nz <- dat %>% filter(Month >= \"2016-01-01\") %>% totalQuestions()\ndat$TagName <- factor(as.character(dat$TagName), levels = as.character(z$TagName))\n\n\n\n#################\n#     DATA VISU #\n#               #\n#               #\n#################\n\n\nlibrary(ggplot2)\np1 <- ggplot(dat, aes(x = Month, y = Questions, group = TagName, colour = TagName)) + \n  theme_bw(20)\n\n# Tendances depuis le premier janvier 2014 \n#################\n\n\ntoto=lapply(X =setNames(as.character( unique(dat$TagName)),as.character( unique(dat$TagName))),FUN = function(x) lm(data = dat[dat$TagName==x,] %>% filter(Month >= \"2014-01-01\"),formula =  Questions~Month)$coefficients)\nmat=do.call(rbind,toto)\ntendances = mat[order(mat[,2,drop=T]),2,drop=F]\ncolnames(tendances) = \"Tendances depuis 2014\"\np1 + geom_line(size = 1)\nlibrary(ggthemes)\n ggplot(dat, aes(x = Month, y = Questions, group = TagName, colour = TagName)) + \n  theme_bw(20)+ geom_smooth(size = 1, method = \"lm\", span = 0.5)\n\np1 <- ggplot(dat, aes(x = Month, y = Questions, group = TagName, colour = TagName)) + \n  theme_bw(20)\n\n# \n#https://www.r-bloggers.com/the-most-popular-programming-languages-on-stackoverflow/\n\n\n```\n\n\n\n\n\n\n \n\n",
    "created" : 1487666081846.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2989390782",
    "id" : "E388BA97",
    "lastKnownWriteTime" : 1487666025,
    "last_content_update" : 1487666025,
    "path" : "~/Documents/FIN406_2017/01-intro.Rmd",
    "project_path" : "01-intro.Rmd",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}